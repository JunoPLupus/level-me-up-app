@if (task(); as currentTask) {
  <div class="detail-container">
    <div class="detail-header">
      <button mat-icon-button routerLink="/tasks" aria-label="Voltar para a lista">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <span class="header-title">Detalhes</span>
      <div>
        <button mat-icon-button [routerLink]="['/tasks/edit', currentTask.id]" aria-label="Editar tarefa">
          <mat-icon>edit</mat-icon>
        </button>
      </div>
    </div>

    @if (isLoading()) {
      <div class="loading-container">
        <mat-spinner diameter="50"></mat-spinner>
        <p>Carregando tarefa...</p>
      </div>
    }

    @else if (task(); as currentTask) {
      <mat-card class="detail-content">
        <mat-card-header>
          <mat-card-title class="task-main-title">
            {{ currentTask.title }}
          </mat-card-title>
          <mat-card-subtitle>
            <mat-chip-set>
              <mat-chip selected color="primary">{{ currentTask.tagId }}</mat-chip>
            </mat-chip-set>
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          @if(currentTask.description) {
            <p class="task-description">{{ currentTask.description }}</p>
          }

          <ul class="info-list">
            <li><mat-icon>flag</mat-icon><span>Prioridade {{ currentTask.priority }}</span></li>
            <li><mat-icon>sync</mat-icon><span>Repetição: {{ currentTask.frequency }}</span></li>
            <li>
              <mat-icon>date_range</mat-icon>
              <span>
                {{ currentTask.startDate | date:'dd/MM HH:mm' }} →
                {{ currentTask.endDate ? (currentTask.endDate | date:'dd/MM HH:mm') : 'Indefinido' }}
              </span>
            </li>
          </ul>

        </mat-card-content>
      </mat-card>
    }

  </div>

} @else {
    <div class="not-found-container">
      <mat-icon>error_outline</mat-icon>
      <p>Tarefa não encontrada.</p>
      <button mat-button color="primary" routerLink="/tasks">Voltar para a lista</button>
    </div>
}
